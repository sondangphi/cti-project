<html>
    <head> 

      
        <title>Our first Google Map</title>
 <style type="text/css">
   html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

#bounded {
	overflow: hidden;
}

#map_canvas {
 	width:100%;
 	height: 100%;
}


#directions_panel {
	
	padding-top:20px;
	width:100%;
	
	overflow:scroll;
}
#direction{
	height: 100%;
	float: left;
	width: 0%;
	
	overflow:hidden;
	
}
#direct_search_bar{
	height: 100px;
	width:0px;
	background:#CCCCCC;
	overflow:hidden;
}

#control {
	background: #fff;
	padding: 5px;
	font-size: 14px;
	font-family: Arial;
	border: 1px solid #ccc;
	box-shadow: 0 2px 2px rgba(33, 33, 33, 0.4);
	display: none;
}
#addressBar{
	padding:30px;
	overflow: hidden;
}
#FindAddress{
width:500px;
margin-left:50px;
height:30px;
}
#btnShow{
margin-left:20px;
height:30px;
}

    </style>
	
 <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA-l9OJmmKlUWS2ipiFppoVYZGfUahcEN0&sensor=false">
    </script>
  <script src="jquery.min.js">
  </script>
 
      <script>
	  var _REQUEST = {};
	   var geocoder;
	   var map;
      var directionDisplay;
      var directionsService = new google.maps.DirectionsService();

	$(document).ready(function() {
	  	$("#bounded").height($("body").height() - $("#addressBar").height() -60);
		$("#FindAddress").val(_REQUEST['diadiem']);
		setTimeout(function() {
			codeAddress();
		}, 2000);
	  });

      function initialize() {
	  geocoder = new google.maps.Geocoder();
   		
        directionsDisplay = new google.maps.DirectionsRenderer();
        var mapOptions = {
          zoom: 5,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: new google.maps.LatLng(16.509833,107.314453)
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById('directions_panel'));

        var control = document.getElementById('control');
        control.style.display = 'block';
        map.controls[google.maps.ControlPosition.TOP].push(control);
      }
	  
	function codeAddress() {
			var address = document.getElementById("FindAddress").value;
			geocoder.geocode( { 'address': address}, function(results, status) {
			  if (status == google.maps.GeocoderStatus.OK) {
				map.setCenter(results[0].geometry.location);
				map.setZoom(15);
				var marker = new google.maps.Marker({
				
					map: map,
					position: results[0].geometry.location
				});
			  } else {
				alert("Geocode was not successful for the following reason: " + status);
			  }
			});
			$("#panel").show();
			show();	
			
		}
      function calcRoute() {
        var start = document.getElementById('start').value;
        var end = document.getElementById('end').value;
        var request = {
          origin: start,
          destination: end,
          travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
          }
        });
		$("#panel").show();
		show();	
      }
	  function show()
	  {
			var map=$("#map_canvas");
			var direct = $("#direction"); 
			var direct_bar=$("#direct_search_bar");
			var panel = $("#directions_panel"); 
			direct.animate({width: "300px"});		
			direct_bar.animate({width:"100%"});
			panel.animate({width:"100%"});
			$("#panel").height($("#bounded").height() - $("#direct_search_bar").height());
			
			map.animate({width: ($("#bounded").width()-308)+"px"});

		
	  		
		
	  }
	  function hide()
	  {
			var map=$("#map_canvas");
			var direct = $("#direction"); 
			var direct_bar=$("#direct_search_bar");
			var panel = $("#panel"); 
			direct.animate({width:"0%"});		
			direct_bar.animate({width:"0%"});
			panel.hide();
			map.animate({width: ($("#bounded").width()-8)+"px"});
	  }
	  

	function parseQuery() {
		var url = document.URL;
		var ind = url.indexOf("?");
		
		if (ind >= 0) {
			var queryString = url.substr(ind+1) + "&";
			
			while ((ind = queryString.indexOf("&")) >= 0) {
				var req = queryString.substr(0, ind);
				queryString = queryString.substr(ind+1);
				
				if ((ind = req.indexOf("=")) >= 0) {
					var key = req.substr(0,  ind);
					var value = req.substr(ind+1);
					
					_REQUEST[decodeURIComponent(key)] = decodeURIComponent(value)
														.replace(/\+/g, " ");
				}
			}
		}
	}
	
	parseQuery();
    </script>
    </head>   
     <body onload="initialize()">
		 <div id="addressBar">
				<strong><font size="+2">Address:</font></strong>
				<input type="text" id="FindAddress" value="" width="300px" height="30px">
				<input name="button" type="button" id="btnShow" onClick=" codeAddress()" value="Show" >
		</div>
		<div id="bounded">
			<div  id="direction">
				<div id="direct_search_bar">
					<div style="margin-top:15px">
						<strong>Start:</strong><input type="text" id="start" value="ca" ><br>
						<strong>End   :</strong><input type="text" id="end" value="us"  ><br>
					</div>
					<div  align="right">
						<input id="search" type="button" onClick="calcRoute();" value="search">
						<input id="btnHide" type="button" value="X" onClick="hide();" >
					</div>
				</div>
				<div id="panel" style="overflow:auto">
				<div id="directions_panel"></div>
				</div>
			</div>
		
 			<div id="map_canvas"></div>
		</div>
  </body>
</html>